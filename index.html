<!doctype html>
<html>

<head>
  <title>2020 US Presidential Election Model</title>

  <style>
    body {background-color: lightblue; text-align:center}
    h1 {color: black; text-align:center}
    h2 {color: black; text-align:center}
    p {color: black; text-align:center}
    img {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    table {
      border-collapse: collapse;
      border: 2px black solid;
      font: 12px sans-serif;
      text-align: center;
    }
    td {
      border: 1px black solid;
      padding: 5px;
    }
  </style>
</head>

<script>
  function includeHTML() {
    var z, i, elmnt, file, xhttp;
    /*loop through a collection of all HTML elements:*/
    z = document.getElementsByTagName("*");
    for (i = 0; i < z.length; i++) {
      elmnt = z[i];
      /*search for elements with a certain atrribute:*/
      file = elmnt.getAttribute("w3-include-html");
      if (file) {
        /*make an HTTP request using the attribute value as the file name:*/
        xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4) {
            if (this.status == 200) {elmnt.innerHTML = this.responseText;}
            if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
            /*remove the attribute, and call this function once more:*/
            elmnt.removeAttribute("w3-include-html");
            includeHTML();
          }
        }      
        xhttp.open("GET", file, true);
        xhttp.send();
        /*exit the function:*/
        return;
      }
    }
  };
</script>

<body>

  <header>
    <h1>2020 United States Presidential Election Model</h1>
    <p>
      Hi, I'm Wyatt Entrekin, a 3rd-year Industrial Engineering student at the Georgia Institute of Technology
      with a strong interest in data analysis and a fascination with electoral politics.
      I created this election model as the result of a desire to develop my programming skills and a near obsession with the topic.
      Below, you will see the results of the model, as well as explanation of the methods I used to produce the data you're looking at.
      If you have any questions, wish to connect professionally, or are interested in learning more about the project,
      feel free to email me at <b>wmentrekin@gmail.com</b>,
      connect with me on <b><a href="https://www.linkedin.com/in/wentrekin/">LinkedIn</a></b>,
      or check out the code on <b><a href="https://github.com/wmentrekin/2020election">GitHub</a></b>.
    </p>
  </header>

  <section>
    <h2>Methods</h2>
    <p>
      <b>Disclaimer</b>: This model is not an official prediction. I am in no way attesting to its potential accuracy or claiming it to be correct. 
      The point of this project was to be a learning exercise for me as well as an outlet for an interest of mine. The data you see here is purely a result 
      of my model and I am not in any way a professional election forecaster. Nonetheless, I hope this peaks your interest.
    </p>
    <p>
      When I first decided to begin working on this model in August, I wanted to challenge myself to learn more about different Python libraries, 
      such as Scipy, Numpy, Pandas, and Matplotlib and to see if I could come up with anything accurate at all. I utilized my prior skills in webscraping 
      and data manipulation while using new knowledge in statistics and data visualization. The entire model is written in Python.
    </p>
    <p>
      This model essentially uses election data from 2016 and polling for this current election cycle to create a rough forecast of the 2020 election.
      I gathered data about all 50 states and the District of Columbia from <a href="https://www.census.gov/">the census website</a>, 
      2016 election data from <a href='https://www.fec.gov/'>the FEC website</a>, 2020 election polling data from <a href='https://www.270towin.com/'>270 to win</a>, 
      and pollster ratings and bias from <a href='https://fivethirtyeight.com/'>538</a>.
    </p>
    <p>
      After the data was gathered and cleaned, I had three classes of objects: States, Polls, and Pollsters. I wanted to use the data I gathered about each of these objects, 
      to implement this model. The model thus breaks down into these parts: correcting polls based on the grade and historical bias of their pollsters, 
      aggregating polls in each state into a singular rating with a vote share for both candidates and margin of error based on the combined margins of all the polls 
      (for states with no polling data, this rating was simply based on the 2016 election results, as states with no polling data are not assumed to be competitive 
      or chance much in their results from the prior election cycle), combining the prior election results and the ratings for each state into distributions of possible vote share 
      for each candidate in each state, simulating 10,000 races in each state, and visualizing the data with the map and graphs you see below.
    </p>
  </section>

  <div class="container">
    <h2>Average Margin of Victory</h2>
    <img src="results/map.png" alt="Average Margin of Victory" width="800" height="536">
  </div>

  <div class="container">
    <div class="row">
      <div class="col">
        <div w3-include-html="tables/closest_margins.html"></div>
      </div>
      <div class="col">
        <div w3-include-html="tables/lopsided_margins.html"></div>
      </div>
      <div class="col">
        <div w3-include-html="tables/tossups.html"></div>
      </div>
      <div class="col">
        <div w3-include-html="tables/flips.html"></div>
      </div>
      <div class="col">
        <div w3-include-html="tables/results.html"></div>
      </div>
      <div class="col">
        <div w3-include-html="tables/win_prob.html"></div>
      </div>
    </div>
  </div>

</body>

<script>
  includeHTML();
</script>

</html>
